C:/Users/matth/Desktop/1-DSM/Research/REACT-BUILD/my-app/src/api.js:
// my-app/src/api.js
import axios from 'axios';

const API_BASE_URL = process.env.REACT_APP_API_BASE_URL;

export const getRoot = async () => {
  try {
    const response = await axios.get(`${API_BASE_URL}/`);
    return response.data;
  } catch (error) {
    throw error;
  }
};

export const processData = async (data, config) => {
  try {
    const response = await axios.post(`${API_BASE_URL}/process-data`, { data, config });
    return response.data;
  } catch (error) {
    throw error;
  }
};



C:/Users/matth/Desktop/1-DSM/Research/REACT-BUILD/my-app/src/App.css:
/* src/App.css */

/* CSS Variables for Dark Mode */
:root {
  --background-color: #121212;
  --primary-color: #1f1f1f;
  --secondary-color: #1e1e1e;
  --accent-color: #bb86fc;
  --text-color: #ffffff;
  --secondary-text-color: #bbbbbb;
  --border-color: #333333;
  --button-background: #bb86fc;
  --button-hover: #985eff;
  --modal-background: #1f1f1f;
  --dropzone-border: #444444;
  --dropzone-background: #1f1f1f;
  --input-background: #2c2c2c;
  --input-text-color: #ffffff;
  --select-background: #2c2c2c;
  --select-text-color: #ffffff;
}

/* Global Styles */
body {
  margin: 0;
  padding: 0;
  background-color: var(--background-color);
  color: var(--text-color);
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}

.App {
  text-align: center;
  padding: 20px;
}

h1 {
  color: var(--accent-color);
  margin-bottom: 30px;
}

/* Other global styles can remain here */



C:/Users/matth/Desktop/1-DSM/Research/REACT-BUILD/my-app/src/App.js:
// src/App.js
import React, { useState, useEffect } from 'react';
import { processData } from './api';
import { 
  ReactFlowProvider, 
  addEdge, 
  useNodesState, 
  useEdgesState 
} from 'react-flow-renderer'; // Named Imports
import FileUploader from './components/FileUploader/FileUploader';
import ConfigurationPanel from './components/ConfigurationPanel/ConfigurationPanel';
import GraphVisualizer from './components/GraphVisualizer/GraphVisualizer';
import RelationshipModal from './components/RelationshipModal/RelationshipModal';
import ReactFlowWrapper from './components/ReactFlowWrapper/ReactFlowWrapper'; // Import the new component
import NodeEditModal from './components/NodeEditModal/NodeEditModal'; // Import the new component
import './App.css';
import 'react-flow-renderer/dist/style.css'; // Import React Flow's default styles

function App() {
  const [csvData, setCsvData] = useState([]);
  const [columns, setColumns] = useState([]);
  const [config, setConfig] = useState({ nodes: [], relationships: [], graph_type: 'directed' });
  const [graphData, setGraphData] = useState(null);
  const [loading, setLoading] = useState(false);

  // Initialize nodes and edges using hooks
  const [nodes, setNodes, onNodesChange] = useNodesState([]);
  const [edges, setEdges, onEdgesChange] = useEdgesState([]);

  // Modal States for Relationships
  const [relationshipModalIsOpen, setRelationshipModalIsOpen] = useState(false);
  const [currentEdge, setCurrentEdge] = useState(null);

  // Modal States for Node Editing
  const [nodeEditModalIsOpen, setNodeEditModalIsOpen] = useState(false);
  const [currentNode, setCurrentNode] = useState(null);

  // Handle file drop
  const handleFileDrop = (data, fields) => {
    setCsvData(data);
    setColumns(fields);
    initializeConfig(fields);
    initializeReactFlow(fields);
  };

  // Initialize config with selectable nodes
  const initializeConfig = (fields) => {
    setConfig({
      nodes: [], // Initially no nodes are selected
      relationships: [],
      graph_type: 'directed', // You can change this to 'undirected' if needed
    });
  };

  // Initialize React Flow nodes with grid layout (only selected nodes will appear)
  const initializeReactFlow = (fields) => {
    // Initially, no nodes are selected, so ReactFlow will render empty
    setNodes([]);
    setEdges([]);
  };

  // Handle relationship submission
  const handleSaveRelationship = ({ relationshipType, relationshipFeatures }) => {
    if (!relationshipType) {
      alert('Please enter a relationship type.');
      return;
    }

    // Update config.relationships using functional updater to access previous state
    setConfig((prevConfig) => {
      const newRelationship = {
        source: currentEdge.source,
        target: currentEdge.target,
        type: relationshipType,
        features: relationshipFeatures,
      };

      // Create the new edge with data
      const edgeWithData = {
        ...currentEdge,
        type: 'smoothstep', // You can choose any edge type you prefer   
        
        animated: prevConfig.graph_type === 'directed',
        arrowHeadType: prevConfig.graph_type === 'directed' ? 'arrowclosed' : 'none',
        label: relationshipType,
        data: { type: relationshipType, features: relationshipFeatures },
      };

      // Add the new relationship to the config
      const updatedConfig = {
        ...prevConfig,
        relationships: [...prevConfig.relationships, newRelationship],
      };

      // Update edges state
      setEdges((eds) => addEdge(edgeWithData, eds));

      return updatedConfig;
    });

    // Reset modal state
    setRelationshipModalIsOpen(false);
    setCurrentEdge(null);
  };

  // Handle edge creation
  const onConnectHandler = (params) => {
    setCurrentEdge(params);
    setRelationshipModalIsOpen(true);
  };

  // Handle node click for editing
  const onNodeClickHandler = (node) => {
    setCurrentNode(node);
    setNodeEditModalIsOpen(true);
  };

  // Handle node type and feature updates
  const handleSaveNodeEdit = ({ nodeType, nodeFeatures }) => {
    if (!nodeType) {
      alert('Please enter a node type.');
      return;
    }

    // Update config.nodes using functional updater
    setConfig((prevConfig) => {
      const updatedNodes = prevConfig.nodes.map((n) => {
        if (n.id === currentNode.id) {
          return {
            ...n,
            type: nodeType,
            features: nodeFeatures,
          };
        }
        return n;
      });

      return {
        ...prevConfig,
        nodes: updatedNodes,
      };
    });

    // Update React Flow node data
    setNodes((nds) =>
      nds.map((node) => {
        if (node.id === currentNode.id) {
          return {
            ...node,
            type: nodeType,
            data: { ...node.data, label: `${node.data.label} (${nodeType})` },
          };
        }
        return node;
      })
    );

    // Reset modal state
    setNodeEditModalIsOpen(false);
    setCurrentNode(null);
  };

  // Handle node selection for inclusion as a node in the graph
  const handleSelectNode = (column) => {
    // Check if the column is already selected as a node
    const isSelected = config.nodes.find((n) => n.id === column);

    if (isSelected) {
      // If already selected, remove it
      setConfig((prevConfig) => ({
        ...prevConfig,
        nodes: prevConfig.nodes.filter((n) => n.id !== column),
      }));

      // Remove from React Flow
      setNodes((nds) => nds.filter((n) => n.id !== column));

      // Optionally, remove related edges
      setEdges((eds) => eds.filter((e) => e.source !== column && e.target !== column));
    } else {
      // If not selected, add it with default type
      setConfig((prevConfig) => ({
        ...prevConfig,
        nodes: [...prevConfig.nodes, { id: column, type: 'default', features: [] }],
      }));

      // Add to React Flow with default type and position
      const newNode = {
        id: column,
        type: 'default',
        data: { label: column },
        position: {
          x: Math.random() * 600 - 300, // Random position for simplicity
          y: Math.random() * 600 - 300,
        },
      };

      setNodes((nds) => nds.concat(newNode));
    }
  };

  // Handle form submission
  const handleSubmit = async () => {
    // Basic validation
    for (let node of config.nodes) {
      if (!node.id) {
        alert('Please select an ID column for all nodes.');
        return;
      }
      if (!node.type || node.type === 'default') { // Ensure type is specified
        alert(`Please specify a valid type for node '${node.id}'.`);
        return;
      }
    }
    for (let rel of config.relationships) {
      if (!rel.source || !rel.target) {
        alert('Please select source and target columns for all relationships.');
        return;
      }
      if (!rel.type || rel.type === 'default') { // Ensure relationship type is specified
        alert('Please specify a valid type for all relationships.');
        return;
      }
    }

    setLoading(true);
    try {
      const response = await processData(csvData, config);
      const receivedGraph = response.graph;

      // Compute node degrees
      const degrees = {};
      receivedGraph.links.forEach((link) => {
        if (receivedGraph.directed) {
          degrees[link.source] = (degrees[link.source] || 0) + 1; // Out-degree
          degrees[link.target] = (degrees[link.target] || 0) + 1; // In-degree
        } else {
          degrees[link.source] = (degrees[link.source] || 0) + 1;
          degrees[link.target] = (degrees[link.target] || 0) + 1;
        }
      });

      // Assign degree to nodes
      const nodesWithSize = receivedGraph.nodes.map((node) => ({
        ...node,
        val: degrees[node.id] || 1, // Default size if degree is 0
      }));

      const updatedGraphData = {
        ...receivedGraph,
        nodes: nodesWithSize,
      };

      setGraphData(updatedGraphData);
    } catch (error) {
      console.error('Error processing data:', error);
      alert('Error processing data. Check console for details.');
    }
    setLoading(false);
  };

  // Handle window resize for responsive graph
  const [dimensions, setDimensions] = useState({
    width: window.innerWidth * 0.9, // Increased width to 90%
    height: (window.innerWidth * 0.9) * (2 / 3), // Maintained 3:2 ratio
  });

  useEffect(() => {
    const handleResize = () => {
      setDimensions({
        width: window.innerWidth * 0.9, // 90% width
        height: (window.innerWidth * 0.9) * (2 / 3), // 3:2 ratio
      });
    };

    window.addEventListener('resize', handleResize);
    return () => window.removeEventListener('resize', handleResize);
  }, []);

  // Update config.nodes whenever nodes state changes (e.g., after node edits)
  useEffect(() => {
    if (columns.length === 0) return;
    setConfig((prevConfig) => ({
      ...prevConfig,
      nodes: nodes.map((node) => ({
        id: node.id,
        type: node.type || 'default',
        features: prevConfig.nodes.find((n) => n.id === node.id)?.features || [],
      })),
    }));
  }, [nodes, columns]);

  return (
    <ReactFlowProvider>
      <div className="App">
        <h1>CSV to Graph Application</h1>

        {/* CSV Upload Section */}
        <FileUploader onFileDrop={handleFileDrop} />

        {/* Configuration Section for Selecting Nodes and Relationships */}
        {columns.length > 0 && (
          <ConfigurationPanel
            columns={columns}
            onSelectNode={handleSelectNode}
            onSubmit={handleSubmit}
            loading={loading}
            selectedNodes={config.nodes.map((n) => n.id)}
          />
        )}

        {/* React Flow Configurator */}
        {columns.length > 0 && (
          <ReactFlowWrapper
            nodes={nodes}
            edges={edges}
            onNodesChange={onNodesChange}
            onEdgesChange={onEdgesChange}
            onConnect={onConnectHandler}
            onNodeClick={onNodeClickHandler} // Pass node click handler
          />
        )}

        {/* Graph Visualization Section */}
        {graphData && (
          <GraphVisualizer graphData={graphData} dimensions={dimensions} />
        )}

        {/* Relationship Modal */}
        <RelationshipModal
          isOpen={relationshipModalIsOpen}
          onRequestClose={() => setRelationshipModalIsOpen(false)}
          columns={columns}
          onSaveRelationship={handleSaveRelationship}
        />

        {/* Node Edit Modal */}
        {currentNode && (
          <NodeEditModal
            isOpen={nodeEditModalIsOpen}
            onRequestClose={() => setNodeEditModalIsOpen(false)}
            node={currentNode}
            onSaveNodeEdit={handleSaveNodeEdit}
          />
        )}
      </div>
    </ReactFlowProvider>
  );
}

export default App;

/*
Detailed Explanation:

1. **Selective Node Inclusion:**
   - **`handleSelectNode`**: This function toggles the selection of a column as a node. If the column is already selected, it removes it; otherwise, it adds it with a default type.
   - **`ConfigurationPanel`**: Updated to include node selection UI (see the next section).

2. **Dynamic Validation:**
   - The `handleSubmit` function now only validates node types for columns selected as nodes.
   - Previously, all columns were treated as nodes with default types, leading to validation errors for unselected nodes.

3. **Integration with `ReactFlowWrapper`:**
   - **`onNodeClickHandler`**: Handles the event when a node is clicked, opening the `NodeEditModal` for dynamic editing.

4. **State Management:**
   - **`config.nodes`**: Now only includes columns selected as nodes.
   - **`config.relationships`**: Manages relationships defined via `RelationshipModal`.
   - **`nodes` and `edges`**: Managed by React Flow hooks.

5. **UI Components:**
   - **`NodeEditModal`**: Allows dynamic editing of node types and features directly within the graph.

6. **Initial ReactFlow Nodes:**
   - Initially, no nodes are selected; nodes are added by the user via the `ConfigurationPanel`.

7. **Edge Handling:**
   - Only edges between selected nodes are allowed. You might need to enforce this in the `RelationshipModal` or during processing.

8. **Responsive Design:**
   - The `dimensions` state ensures the graph remains responsive to window resizing.

9. **Assumptions:**
   - The `ConfigurationPanel` now includes node selection capabilities (see the next section).
   - The `NodeEditModal` component allows dynamic editing of node types and features.

10. **Backend Synchronization:**
    - The `processData` function sends the updated `config` to the backend, which now only includes selected nodes with their respective types and features.

*/



C:/Users/matth/Desktop/1-DSM/Research/REACT-BUILD/my-app/src/App.test.js:
import { render, screen } from '@testing-library/react';
import App from './App';

test('renders learn react link', () => {
  render(<App />);
  const linkElement = screen.getByText(/learn react/i);
  expect(linkElement).toBeInTheDocument();
});



C:/Users/matth/Desktop/1-DSM/Research/REACT-BUILD/my-app/src/components/ConfigurationPanel/ConfigurationPanel.css:
/* src/components/ConfigurationPanel/ConfigurationPanel.css */

.config-section {
  text-align: left;
  max-width: 1200px; /* Increased max-width for wider screens */
  margin: 20px auto;
  padding: 25px;
  border: 1px solid var(--border-color);
  border-radius: 10px;
  background-color: var(--primary-color);
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

.config-section h2 {
  margin-top: 0;
  color: var(--accent-color);
}

.config-section p {
  color: var(--secondary-text-color);
  line-height: 1.6;
}

.node-selection {
  display: flex;
  flex-wrap: wrap;
  gap: 20px;
  margin-bottom: 20px;
}

.node-selector {
  display: flex;
  align-items: center;
}

.node-selector input {
  margin-right: 10px;
  width: 16px;
  height: 16px;
}

.node-selector label {
  cursor: pointer;
  color: var(--text-color);
}

/* Submit Button */
.config-section button {
  background-color: var(--button-background);
  color: var(--text-color);
  border: none;
  padding: 12px 20px;
  border-radius: 5px;
  cursor: pointer;
  font-size: 16px;
  transition: background-color 0.3s, transform 0.2s;
}

.config-section button:hover {
  background-color: var(--button-hover);
  transform: translateY(-2px);
}

.config-section button:disabled {
  background-color: #555555;
  cursor: not-allowed;
}



C:/Users/matth/Desktop/1-DSM/Research/REACT-BUILD/my-app/src/components/ConfigurationPanel/ConfigurationPanel.js:
// src/components/ConfigurationPanel/ConfigurationPanel.js
import React from 'react';
import './ConfigurationPanel.css'; // Updated path

const ConfigurationPanel = ({ columns, onSelectNode, onSubmit, loading, selectedNodes }) => {
  return (
    <div className="config-section">
      <h2>Configuration</h2>
      <p>
        Select the columns you want to include as nodes in the graph. Only selected columns will require a node type and features.
      </p>

      <div className="node-selection">
        {columns.map((column) => (
          <div key={column} className="node-selector">
            <input
              type="checkbox"
              id={`node-select-${column}`}
              checked={selectedNodes.includes(column)}
              onChange={() => onSelectNode(column)}
            />
            <label htmlFor={`node-select-${column}`}>{column}</label>
          </div>
        ))}
      </div>

      <button onClick={onSubmit} disabled={loading}>
        {loading ? 'Processing...' : 'Submit Configuration'}
      </button>
    </div>
  );
};

export default ConfigurationPanel;

/*
Detailed Explanation:

1. **Props Received:**
   - `columns`: An array of column names from the uploaded CSV.
   - `onSelectNode`: Function to handle the selection/deselection of a column as a node.
   - `onSubmit`: Function to handle the submission of the configuration.
   - `loading`: Boolean indicating whether a submission is in progress.
   - `selectedNodes`: Array of currently selected node columns.

2. **UI Elements:**
   - **Checkboxes for Node Selection:**
     - Each column is presented with a checkbox. Checking it includes the column as a node; unchecking it excludes it.
   
   - **Submit Button:**
     - Allows users to submit the selected configuration. Disabled when `loading` is `true`.

3. **Styling:**
   - Ensure that `ConfigurationPanel.css` styles the node selection UI appropriately.

*/




C:/Users/matth/Desktop/1-DSM/Research/REACT-BUILD/my-app/src/components/FileUploader/FileUploader.css:
/* src/components/FileUploader/FileUploader.css */

.file-uploader {
  max-width: 600px;
  margin: 20px auto;
}

.dropzone {
  display: flex;
  align-items: center;
  justify-content: center;
  height: 150px;
  border: 2px dashed var(--border-color);
  border-radius: 10px;
  background-color: var(--dropzone-background);
  color: var(--text-color);
  cursor: pointer;
  transition: background-color 0.3s, border-color 0.3s;
}

.dropzone.active {
  background-color: var(--dropzone-active-background);
  border-color: var(--accent-color);
}

.dropzone p {
  font-size: 16px;
  text-align: center;
}


C:/Users/matth/Desktop/1-DSM/Research/REACT-BUILD/my-app/src/components/FileUploader/FileUploader.js:
// src/components/FileUploader/FileUploader.js
import React from 'react';
import { useDropzone } from 'react-dropzone';
import Papa from 'papaparse';
import './FileUploader.css'; // Create this CSS file for styling

const FileUploader = ({ onFileDrop }) => {
  const onDrop = (acceptedFiles) => {
    if (acceptedFiles.length === 0) return;

    const file = acceptedFiles[0];
    Papa.parse(file, {
      header: true,
      skipEmptyLines: true,
      complete: function(results) {
        const data = results.data;
        const fields = results.meta.fields;
        onFileDrop(data, fields);
      },
      error: function(error) {
        console.error('Error parsing CSV:', error);
        alert('Error parsing CSV file.');
      }
    });
  };

  const { getRootProps, getInputProps, isDragActive } = useDropzone({
    onDrop,
    accept: '.csv',
    multiple: false
  });

  return (
    <div className="file-uploader">
      <div {...getRootProps()} className={`dropzone ${isDragActive ? 'active' : ''}`}>
        <input {...getInputProps()} />
        {
          isDragActive ?
            <p>Drop the CSV file here ...</p> :
            <p>Drag 'n' drop a CSV file here, or click to select file</p>
        }
      </div>
    </div>
  );
};

export default FileUploader;

/*
Detailed Explanation:

1. **Props Received:**
   - `onFileDrop`: Function to handle the parsed CSV data and column headers.

2. **File Parsing:**
   - Uses `Papa.parse` to parse the uploaded CSV file.
   - On successful parsing, it calls `onFileDrop` with the data and headers.
   - Handles parsing errors gracefully.

3. **Styling:**
   - The `FileUploader.css` should style the dropzone area appropriately.
*/




C:/Users/matth/Desktop/1-DSM/Research/REACT-BUILD/my-app/src/components/GraphVisualizer/GraphVisualizer.css:
/* src/components/GraphVisualizer/GraphVisualizer.css */

.graph-section {
  text-align: center;
  margin-top: 40px;
}

.graph-section h2 {
  color: var(--accent-color);
  margin-bottom: 20px;
}

.graph-container {
  width: 100%;
  max-width: 1800px; /* Increased max-width for wider screens */
  margin: 0 auto;
  border: 1px solid var(--border-color);
  border-radius: 10px;
  overflow: hidden;
  background-color: var(--primary-color);
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  aspect-ratio: 3 / 2; /* Ensures a 3:2 aspect ratio */
}

/* ForceGraph2D Styling */
.graph-section canvas {
  background-color: var(--primary-color) !important;
}



C:/Users/matth/Desktop/1-DSM/Research/REACT-BUILD/my-app/src/components/GraphVisualizer/GraphVisualizer.js:
// src/components/GraphVisualizer/GraphVisualizer.js
import React from 'react';
import ForceGraph2D from 'react-force-graph-2d';
import './GraphVisualizer.css'; // Updated path

const GraphVisualizer = ({ graphData, dimensions }) => {
  return (
    <div className="graph-section">
      <h2>Graph Visualization</h2>
      <div className="graph-container">
        <ForceGraph2D
          graphData={graphData}
          nodeAutoColorBy="type"
          linkAutoColorBy="type"
          nodeLabel="id"
          linkLabel="type"
          nodeVal={(node) => node.val}
          linkDirectionalArrowLength={graphData.directed ? 6 : 0}
          linkDirectionalArrowRelPos={0.5}
          width={dimensions.width}
          height={dimensions.height}
          cooldownTicks={300}
          enableNodeDrag={true}
          enableZoomPanInteraction={true}
          backgroundColor={null}
        />
      </div>
    </div>
  );
};

export default GraphVisualizer;

/*
Detailed Explanation:

The `GraphVisualizer` component is responsible for rendering a 2D force-directed graph based on the provided graph data. It leverages the `react-force-graph-2d` library to create interactive and dynamic graph visualizations. Here's a comprehensive breakdown of its structure and functionality:

1. **Imports**:
   - **React**: The core library for building user interfaces.
   - **ForceGraph2D** from **react-force-graph-2d**: A component for rendering 2D force-directed graphs, allowing for rich interactivity and customization.
   - **GraphVisualizer.css**: The CSS stylesheet that styles the graph visualization section, ensuring consistency with the application's design.

2. **Component Definition**:
   - **Functional Component**: `GraphVisualizer` is a functional component that accepts two props:
     - `graphData`: An object representing the graph structure, typically containing `nodes` and `links` arrays. Each node and link can have various attributes that define their properties and relationships.
     - `dimensions`: An object specifying the `width` and `height` for the graph canvas, allowing the visualization to be responsive and fit within its container.

3. **Rendering**:
   - The component returns a JSX structure comprising:
     - A `div` with the class `graph-section` that wraps the entire visualization area.
     - An `h2` header titled "Graph Visualization" to denote the purpose of the section.
     - A nested `div` with the class `graph-container` that houses the `ForceGraph2D` component, applying specific styles for layout and responsiveness.
     - **ForceGraph2D Configuration**:
       - `graphData`: Passes the graph data to the visualization component.
       - `nodeAutoColorBy="type"`: Automatically assigns colors to nodes based on their `type` attribute, enhancing visual differentiation.
       - `linkAutoColorBy="type"`: Similarly, assigns colors to links based on their `type` attribute.
       - `nodeLabel="id"`: Sets the label for each node to display its `id` attribute when hovered over.
       - `linkLabel="type"`: Sets the label for each link to display its `type` attribute when hovered over.
       - `nodeVal={(node) => node.val}`: Determines the size of each node based on its `val` attribute, allowing for size differentiation based on node importance or degree.
       - `linkDirectionalArrowLength={graphData.directed ? 6 : 0}`: Conditionally renders directional arrows on links if the graph is directed.
       - `linkDirectionalArrowRelPos={0.5}`: Positions the directional arrow at the midpoint of the link.
       - `width` and `height`: Sets the dimensions of the graph canvas based on the `dimensions` prop, ensuring the graph fits its container.
       - `cooldownTicks={300}`: Controls the simulation's cooldown ticks, affecting how long the simulation runs to stabilize node positions.
       - `enableNodeDrag={true}`: Allows users to manually drag nodes, providing interactive control over the graph layout.
       - `enableZoomPanInteraction={true}`: Enables zooming and panning within the graph, facilitating exploration of large or complex graphs.
       - `backgroundColor={null}`: Sets the background color of the graph canvas. `null` typically defaults to transparent or the parent container's background.

4. **Export**:
   - The component is exported as the default export, making it accessible for import and use in other parts of the application.

**Purpose in the Application**:
The `GraphVisualizer` is a key component for data visualization within the application. After users upload and configure their CSV data, this component takes the processed graph data and renders it interactively. Features like automatic coloring, dynamic sizing, and interactivity (dragging, zooming, panning) enhance the user's ability to analyze and understand complex relationships within the data. By leveraging `react-force-graph-2d`, the component ensures efficient rendering and smooth interactions, even with large datasets.

*/




C:/Users/matth/Desktop/1-DSM/Research/REACT-BUILD/my-app/src/components/NodeEditModal/NodeEditModal.css:
/* src/components/NodeEditModal/NodeEditModal.css */

.node-edit-modal {
    position: absolute;
    top: 50%;
    left: 50%;
    right: auto;
    bottom: auto;
    transform: translate(-50%, -50%);
    background-color: var(--modal-background);
    padding: 25px;
    border-radius: 8px;
    width: 90%;
    max-width: 500px;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
    color: var(--text-color);
    z-index: 1000;
    transition: opacity 0.3s ease-in-out;
    overflow-y: auto;
    max-height: 90vh;
  }
  
  .overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(0,0,0,0.7);
    z-index: 999;
  }
  
  .node-edit-modal h2 {
    margin-top: 0;
    color: var(--accent-color);
    margin-bottom: 20px;
    text-align: center;
  }
  
  .node-edit-modal form {
    display: flex;
    flex-direction: column;
  }
  
  .form-group {
    margin-bottom: 15px;
  }
  
  .form-group label {
    display: block;
    margin-bottom: 5px;
    font-weight: bold;
    color: var(--text-color);
  }
  
  .form-group input[type="text"] {
    width: 100%;
    padding: 8px;
    background-color: var(--input-background);
    color: var(--input-text-color);
    border: 1px solid var(--border-color);
    border-radius: 5px;
    outline: none;
    transition: border-color 0.3s;
  }
  
  .form-group input[type="text"]:focus {
    border-color: var(--accent-color);
  }
  
  .features-list {
    display: flex;
    flex-direction: column;
  }
  
  .feature-item {
    display: flex;
    align-items: center;
    margin-bottom: 5px;
  }
  
  .feature-item input {
    margin-right: 10px;
  }
  
  .add-feature-button {
    margin-top: 10px;
    padding: 6px 12px;
    background-color: var(--button-background);
    color: var(--text-color);
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-size: 14px;
    transition: background-color 0.3s, transform 0.2s;
  }
  
  .add-feature-button:hover {
    background-color: var(--button-hover);
    transform: translateY(-2px);
  }
  
  /* Modal Buttons */
  .modal-buttons {
    display: flex;
    justify-content: flex-end;
    gap: 10px;
    margin-top: 20px;
  }
  
  .modal-buttons button {
    padding: 8px 16px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-size: 14px;
    transition: background-color 0.3s, transform 0.2s;
  }
  
  .modal-buttons button:first-child {
    background-color: var(--button-background);
    color: var(--text-color);
  }
  
  .modal-buttons button:first-child:hover {
    background-color: var(--button-hover);
    transform: translateY(-2px);
  }
  
  .modal-buttons button:last-child {
    background-color: #e74c3c; /* Cancel Button - Red */
    color: #ffffff;
  }
  
  .modal-buttons button:last-child:hover {
    background-color: #c82333;
    transform: translateY(-2px);
  }
  


C:/Users/matth/Desktop/1-DSM/Research/REACT-BUILD/my-app/src/components/NodeEditModal/NodeEditModal.js:
// src/components/NodeEditModal/NodeEditModal.js
import React, { useState, useEffect } from 'react';
import Modal from 'react-modal';
import './NodeEditModal.css'; // Create this CSS file for styling

Modal.setAppElement('#root'); // For accessibility

const NodeEditModal = ({ isOpen, onRequestClose, node, onSaveNodeEdit }) => {
  const [nodeType, setNodeType] = useState(node.type || '');
  const [nodeFeatures, setNodeFeatures] = useState(node.features || []);
  const [availableFeatures, setAvailableFeatures] = useState([]);

  useEffect(() => {
    // Dynamically generate available features based on CSV data or other logic
    // For simplicity, using a static list here
    setAvailableFeatures([
      'feature1',
      'feature2',
      'feature3',
      'feature4',
      'feature5',
    ]);
  }, [node]);

  const handleFeatureChange = (e) => {
    const { value, checked } = e.target;
    if (checked) {
      setNodeFeatures([...nodeFeatures, value]);
    } else {
      setNodeFeatures(nodeFeatures.filter((feature) => feature !== value));
    }
  };

  const handleSubmit = (e) => {
    e.preventDefault();
    if (!nodeType.trim()) {
      alert('Please enter a node type.');
      return;
    }
    onSaveNodeEdit({ nodeType, nodeFeatures });
  };

  const handleAddFeature = () => {
    const newFeature = prompt('Enter new feature name:');
    if (newFeature && !availableFeatures.includes(newFeature)) {
      setAvailableFeatures([...availableFeatures, newFeature]);
      setNodeFeatures([...nodeFeatures, newFeature]);
    }
  };

  return (
    <Modal
      isOpen={isOpen}
      onRequestClose={onRequestClose}
      contentLabel="Edit Node"
      className="node-edit-modal"
      overlayClassName="overlay"
    >
      <h2>Edit Node: {node.id}</h2>
      <form onSubmit={handleSubmit}>
        <div className="form-group">
          <label htmlFor="node-type">Type:</label>
          <input
            type="text"
            id="node-type"
            value={nodeType}
            onChange={(e) => setNodeType(e.target.value)}
            required
            placeholder="e.g., User, Post"
          />
        </div>
        <div className="form-group">
          <label>Features:</label>
          <div className="features-list">
            {availableFeatures.map((feature) => (
              <div key={feature} className="feature-item">
                <input
                  type="checkbox"
                  id={`feature-${feature}`}
                  value={feature}
                  checked={nodeFeatures.includes(feature)}
                  onChange={handleFeatureChange}
                />
                <label htmlFor={`feature-${feature}`}>{feature}</label>
              </div>
            ))}
            <button type="button" onClick={handleAddFeature} className="add-feature-button">
              + Add Feature
            </button>
          </div>
        </div>
        <div className="modal-buttons">
          <button type="submit">Save</button>
          <button type="button" onClick={onRequestClose}>
            Cancel
          </button>
        </div>
      </form>
    </Modal>
  );
};

export default NodeEditModal;

/*
Detailed Explanation:

1. **Props Received:**
   - `isOpen`: Boolean indicating whether the modal is open.
   - `onRequestClose`: Function to close the modal.
   - `node`: The node object that is being edited.
   - `onSaveNodeEdit`: Function to handle saving the edited node details.

2. **State Variables:**
   - `nodeType`: Holds the current type of the node.
   - `nodeFeatures`: Holds the current list of features associated with the node.
   - `availableFeatures`: List of possible features users can assign to the node.

3. **Dynamic Features:**
   - **`handleAddFeature`**: Allows users to add new features dynamically if the existing list doesn't suffice.

4. **Form Handling:**
   - **`handleSubmit`**: Validates input and invokes `onSaveNodeEdit` with the updated type and features.
   - **`handleFeatureChange`**: Manages the selection and deselection of features.

5. **Styling:**
   - The modal uses CSS classes like `node-edit-modal`, `overlay`, `form-group`, `features-list`, `feature-item`, `add-feature-button`, and `modal-buttons` for styling. You need to create `NodeEditModal.css` to style these appropriately.

*/


C:/Users/matth/Desktop/1-DSM/Research/REACT-BUILD/my-app/src/components/ReactFlowWrapper/ReactFlowWrapper.css:
/* src/components/ReactFlowWrapper/ReactFlowWrapper.css */

.wrapper {
  height: 60vh; /* 60% of the viewport height */
  width: 90%;
  max-width: 1200px;
  margin: 20px auto;
  border: 1px solid var(--border-color);
  border-radius: 10px;
  background-color: var(--primary-color);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
  position: relative; /* Ensures React Flow positions correctly */
}

@media (max-width: 1200px) {
  .wrapper {
    width: 95%;
  }
}

@media (max-width: 768px) {
  .wrapper {
    height: 50vh; /* Reduce height on smaller screens */
  }
}

/* Node Styling */
.react-flow__node.default {
  background-color: var(--secondary-color);
  color: var(--text-color);
  border: 1px solid var(--border-color);
  border-radius: 5px;
  padding: 10px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
  transition: transform 0.2s, box-shadow 0.3s;
  display: flex;
  align-items: center;
  justify-content: center;
  height: 100%;
}

.react-flow__node.default:hover {
  transform: scale(1.05);
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
}

/* Edge Styling */
.react-flow__edge-path {
  stroke: var(--accent-color);
  stroke-width: 2px;
}

.react-flow__edge-arrowhead {
  fill: var(--accent-color);
}



C:/Users/matth/Desktop/1-DSM/Research/REACT-BUILD/my-app/src/components/ReactFlowWrapper/ReactFlowWrapper.js:
// src/components/ReactFlowWrapper/ReactFlowWrapper.js
import React from 'react';
import ReactFlow, { Background, Controls } from 'react-flow-renderer';
import './ReactFlowWrapper.css'; 
import 'react-flow-renderer/dist/style.css'; // Import React Flow's default styles

const ReactFlowWrapper = ({ nodes, edges, onNodesChange, onEdgesChange, onConnect, onNodeClick }) => {
  const handleNodeClick = (event, node) => {
    onNodeClick(node);
  };

  return (
    <div className="wrapper">
      <ReactFlow
        nodes={nodes}
        edges={edges}
        onNodesChange={onNodesChange}
        onEdgesChange={onEdgesChange}
        onConnect={onConnect}
        onNodeClick={handleNodeClick} // Handle node clicks
        deleteKeyCode={46} /* 'delete'-key */
        fitView
        style={{ width: '100%', height: '100%' }}
      >
        <Background color="#aaa" gap={16} />
        <Controls />
      </ReactFlow>
    </div>
  );
};

export default ReactFlowWrapper;

/*
Detailed Explanation:

1. **Props Received:**
   - `nodes`: Array of node objects.
   - `edges`: Array of edge objects.
   - `onNodesChange`: Handler for node state changes.
   - `onEdgesChange`: Handler for edge state changes.
   - `onConnect`: Handler for creating new connections (edges).
   - `onNodeClick`: Handler for node click events to open the edit modal.

2. **Handling Node Clicks:**
   - **`handleNodeClick`**: Invoked when a node is clicked. It calls the `onNodeClick` prop with the clicked node as an argument.

3. **ReactFlow Components:**
   - **`Background`**: Adds a grid background to the flow diagram.
   - **`Controls`**: Provides zoom and pan controls.

4. **Styling:**
   - Ensure that `ReactFlowWrapper.css` styles the wrapper appropriately. Here's an example:


*/


C:/Users/matth/Desktop/1-DSM/Research/REACT-BUILD/my-app/src/components/RelationshipModal/RelationshipModal.css:
/* src/components/RelationshipModal/RelationshipModal.css */

.relationship-modal {
  position: absolute;
  top: 50%;
  left: 50%;
  right: auto;
  bottom: auto;
  transform: translate(-50%, -50%);
  background-color: var(--modal-background);
  padding: 25px;
  border-radius: 8px;
  width: 90%;
  max-width: 400px;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
  color: var(--text-color);
  z-index: 1000;
  transition: opacity 0.3s ease-in-out;
  overflow-y: auto;
  max-height: 90vh;
}

.overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(0,0,0,0.7);
  z-index: 999;
}

.relationship-modal h2 {
  margin-top: 0;
  color: var(--accent-color);
  margin-bottom: 20px;
  text-align: center;
}

.relationship-modal form {
  display: flex;
  flex-direction: column;
}

.relationship-modal label {
  margin-bottom: 15px;
  text-align: left;
  font-weight: bold;
  color: var(--text-color);
}

.relationship-type-input {
  width: 100%;
  padding: 8px;
  margin-top: 5px;
  background-color: var(--input-background);
  color: var(--input-text-color);
  border: 1px solid var(--border-color);
  border-radius: 5px;
  outline: none;
  transition: border-color 0.3s;
}

.relationship-type-input:focus {
  border-color: var(--accent-color);
}

.relationship-features-select {
  width: 100%;
  height: 100px;
  padding: 8px;
  margin-top: 5px;
  background-color: var(--select-background);
  color: var(--select-text-color);
  border: 1px solid var(--border-color);
  border-radius: 5px;
  outline: none;
  transition: border-color 0.3s;
  overflow-y: auto;
}

.relationship-features-select:focus {
  border-color: var(--accent-color);
}

.relationship-features-select option {
  background-color: var(--primary-color);
  color: var(--text-color);
}

.modal-buttons {
  display: flex;
  justify-content: flex-end;
  gap: 10px;
  margin-top: 20px;
}

.modal-buttons button {
  padding: 8px 16px;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  font-size: 14px;
  transition: background-color 0.3s, transform 0.2s;
}

.modal-buttons button:first-child {
  background-color: var(--button-background);
  color: var(--text-color);
}

.modal-buttons button:first-child:hover {
  background-color: var(--button-hover);
  transform: translateY(-2px);
}

.modal-buttons button:last-child {
  background-color: #e74c3c; /* Cancel Button - Red */
  color: #ffffff;
}

.modal-buttons button:last-child:hover {
  background-color: #c82333;
  transform: translateY(-2px);
}



C:/Users/matth/Desktop/1-DSM/Research/REACT-BUILD/my-app/src/components/RelationshipModal/RelationshipModal.js:
// src/components/RelationshipModal/RelationshipModal.js
import React, { useState, useEffect } from 'react';
import Modal from 'react-modal';
import './RelationshipModal.css'; // Updated path

Modal.setAppElement('#root'); // For accessibility

const RelationshipModal = ({
  isOpen,
  onRequestClose,
  columns,
  onSaveRelationship,
}) => {
  const [relationshipType, setRelationshipType] = useState('');
  const [relationshipFeatures, setRelationshipFeatures] = useState([]);

  useEffect(() => {
    if (isOpen) {
      setRelationshipType('');
      setRelationshipFeatures([]);
    }
  }, [isOpen]);

  const handleSubmit = (e) => {
    e.preventDefault();
    if (!relationshipType.trim()) {
      alert('Please enter a relationship type.');
      return;
    }
    onSaveRelationship({ relationshipType, relationshipFeatures });
    // Reset modal state
    setRelationshipType('');
    setRelationshipFeatures([]);
  };

  const handleFeatureChange = (e) => {
    const selectedOptions = Array.from(e.target.selectedOptions).map(option => option.value);
    setRelationshipFeatures(selectedOptions);
  };

  return (
    <Modal
      isOpen={isOpen}
      onRequestClose={onRequestClose}
      contentLabel="Relationship Configuration"
      className="relationship-modal"
      overlayClassName="overlay"
    >
      <h2>Configure Relationship</h2>
      <form onSubmit={handleSubmit}>
        <label>
          Relationship Type:
          <input
            type="text"
            value={relationshipType}
            onChange={(e) => setRelationshipType(e.target.value)}
            required
            className="relationship-type-input"
            placeholder="e.g., connects, influences"
          />
        </label>
        <label>
          Features:
          <select
            multiple
            value={relationshipFeatures}
            onChange={handleFeatureChange}
            className="relationship-features-select"
          >
            {columns.map((col) => (
              <option key={col} value={col}>
                {col}
              </option>
            ))}
          </select>
        </label>
        <div className="modal-buttons">
          <button type="submit">Save</button>
          <button type="button" onClick={onRequestClose}>
            Cancel
          </button>
        </div>
      </form>
    </Modal>
  );
};

export default RelationshipModal;

/*
Detailed Explanation:

The `RelationshipModal` component provides a modal dialog that allows users to configure relationships between different data columns. This modal is essential for defining how various entities within the uploaded CSV data relate to each other, facilitating the creation of meaningful graph structures. Here's a comprehensive breakdown of its structure and functionality:

1. **Imports**:
   - **React**, **useState**, **useEffect**: Core React library and hooks for managing state and side effects within the component.
   - **Modal** from **react-modal**: A library for creating accessible modal dialogs in React applications.
   - **RelationshipModal.css**: The CSS stylesheet that styles the modal, ensuring it aligns with the application's design and accessibility standards.

2. **Accessibility Setup**:
   - `Modal.setAppElement('#root')`: Sets the root element of the app for accessibility purposes, ensuring that screen readers and other assistive technologies can appropriately handle the modal's presence.

3. **Component Definition**:
   - **Functional Component**: `RelationshipModal` is a functional component that accepts the following props:
     - `isOpen`: A boolean that determines whether the modal is open or closed.
     - `onRequestClose`: A callback function that is invoked when the modal requests to be closed (e.g., when the user clicks outside the modal or presses the escape key).
     - `columns`: An array of column names or objects representing the data columns available for defining relationships.
     - `onSaveRelationship`: A callback function that is invoked when the user saves the relationship configuration. It receives an object containing the `relationshipType` and `relationshipFeatures`.

4. **State Management**:
   - **`relationshipType`**: A state variable that holds the type of relationship being defined (e.g., "connects", "influences"). It's initialized to an empty string.
   - **`relationshipFeatures`**: A state variable that holds an array of selected features associated with the relationship. It's initialized to an empty array.

5. **Side Effects (`useEffect`)**:
   - Monitors the `isOpen` prop. When the modal is opened (`isOpen` becomes `true`), it resets the `relationshipType` and `relationshipFeatures` to their initial states, ensuring that each time the modal is opened, it starts fresh without residual data from previous interactions.

6. **Event Handlers**:
   - **`handleSubmit`**:
     - Prevents the default form submission behavior.
     - Validates that the `relationshipType` is not empty. If it is, it alerts the user to enter a relationship type.
     - Invokes the `onSaveRelationship` prop with an object containing the `relationshipType` and `relationshipFeatures`.
     - Resets the modal's state by clearing `relationshipType` and `relationshipFeatures`.
   - **`handleFeatureChange`**:
     - Handles changes to the multi-select input for relationship features.
     - Extracts the selected options and updates the `relationshipFeatures` state accordingly.

7. **Rendering**:
   - Utilizes the `Modal` component to create an accessible modal dialog with the following configurations:
     - **`isOpen`**: Controls the visibility of the modal based on the `isOpen` prop.
     - **`onRequestClose`**: Assigns the callback for closing the modal.
     - **`contentLabel`**: Provides an accessible label for the modal content.
     - **`className` and `overlayClassName`**: Assigns CSS classes for styling the modal and its overlay, respectively.
   - Inside the modal:
     - An `h2` header titled "Configure Relationship" to indicate the modal's purpose.
     - A `form` element that contains:
       - **Relationship Type Input**:
         - A labeled text input where users can specify the type of relationship.
         - Includes a placeholder example (e.g., "connects", "influences") to guide users.
       - **Features Selection**:
         - A labeled multi-select dropdown that allows users to select multiple features related to the relationship.
         - Dynamically generates `option` elements based on the `columns` prop, ensuring that users can associate relevant data columns with the relationship.
       - **Buttons**:
         - **Save**: A submit button that triggers the `handleSubmit` function to save the relationship configuration.
         - **Cancel**: A button that invokes the `onRequestClose` callback to close the modal without saving changes.

8. **Export**:
   - The component is exported as the default export, making it accessible for import and use in other parts of the application.

**Purpose in the Application**:
The `RelationshipModal` is integral for defining how different data entities interact within the graph. By allowing users to specify the type and features of relationships, it enables the application to construct more nuanced and informative graph structures. This customization ensures that the resulting visualizations accurately reflect the underlying data relationships, enhancing data analysis and insights.

*/




C:/Users/matth/Desktop/1-DSM/Research/REACT-BUILD/my-app/src/index.css:
body {
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
    sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

code {
  font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New',
    monospace;
}



C:/Users/matth/Desktop/1-DSM/Research/REACT-BUILD/my-app/src/index.js:
import React from 'react';
import ReactDOM from 'react-dom/client';
import './index.css';
import App from './App';
import reportWebVitals from './reportWebVitals';

const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(
  <React.StrictMode>
    <App />
  </React.StrictMode>
);

// If you want to start measuring performance in your app, pass a function
// to log results (for example: reportWebVitals(console.log))
// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals
reportWebVitals(console.log);



C:/Users/matth/Desktop/1-DSM/Research/REACT-BUILD/my-app/src/reportWebVitals.js:
const reportWebVitals = onPerfEntry => {
  if (onPerfEntry && onPerfEntry instanceof Function) {
    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {
      getCLS(onPerfEntry);
      getFID(onPerfEntry);
      getFCP(onPerfEntry);
      getLCP(onPerfEntry);
      getTTFB(onPerfEntry);
    });
  }
};

export default reportWebVitals;



C:/Users/matth/Desktop/1-DSM/Research/REACT-BUILD/my-app/src/setupTests.js:
// jest-dom adds custom jest matchers for asserting on DOM nodes.
// allows you to do things like:
// expect(element).toHaveTextContent(/react/i)
// learn more: https://github.com/testing-library/jest-dom
import '@testing-library/jest-dom';



